<script th:inline="javascript">
  /*<![CDATA[*/
  var robotInfosLobby = /*[[${robotInfos}]]*/ [];
  var codeOfFirstRobot = 'defaultCode'; // 기본 코드 설정
  let selectedDeckLobby = 0;
  let editorLobby;
  if (robotInfos.length > 0) {
      codeOfFirstRobot = robotInfos[0].code; // 0번 인덱스의 코드로 설정
  }

  require.config({ paths: { 'vs': 'https://unpkg.com/monaco-editor@latest/min/vs' } });
  require(["vs/editor/editor.main"], function () {
    editorLobby = monaco.editor.create(document.getElementById('container-lobby-body'), {
      value: codeOfFirstRobot,
      language: 'java',
      theme: 'vs-dark',
      automaticLayout: true,
      fontSize: 20
    });
  });
  /*]]>*/

  function getEditorValue() {
      if (editorLobby) {
          const content = editorLobby.getValue();// Display the content, you can do whatever you want with it
          return content;
      }
  }
function code_check_lobby(result, status, index, code) {
    const terminal = document.getElementById('terminal-lobby');

    if (result != 0) {
        terminal.innerHTML = `<span class="terminal-error">${status}: ${result}</span>`;
    } else {
        terminal.innerHTML = `<span class="terminal-success">${status}: ${result}</span>`;
        robotInfos[index] = code;
    }
}


    function selectDeckIndexLobby(deckId) {
        selectedDeckLobby = deckId;
        console.log(robotInfos)
        if (robotInfos[selectedDeckLobby]) {
            editorLobby.setValue(robotInfos[selectedDeckLobby].code)
            console.log(selectedDeckLobby);
        } else {
            console.log('No robot info found for selected deck.')
        }
    }

    function run_code() {
        compile_code(selectedDeckLobby, getEditorValue());
    }
</script>
